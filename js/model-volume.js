var grossMargin = 0.4;

var volLUT = {
7:    [ 62.3528177784 , 124.705635557 , 187.058453335 , 249.411271113 , 311.764088892 , 374.116906670 , 436.469724449 , 498.822542227 , 561.175360005 , 623.528177784 , ],
7.2:  [ 63.9593785387 , 127.918757077 , 191.878135616 , 255.837514155 , 319.796892694 , 383.756271232 , 447.715649771 , 511.675028310 , 575.634406849 , 639.593785387 , ],
7.4:  [ 65.5659393145 , 131.131878629 , 196.697817943 , 262.263757258 , 327.829696572 , 393.395635887 , 458.961575201 , 524.527514516 , 590.093453830 , 655.659393145 , ],
7.6:  [ 67.1725001056 , 134.345000211 , 201.517500317 , 268.690000422 , 335.862500528 , 403.035000633 , 470.207500739 , 537.380000845 , 604.552500950 , 671.725001056 , ],
7.8:  [ 68.7790604507 , 137.558120901 , 206.337181352 , 275.116241803 , 343.895302253 , 412.674362704 , 481.453423155 , 550.232483605 , 619.011544056 , 687.790604507 , ],
8.0:  [ 70.3856212261 , 140.771242452 , 211.156863678 , 281.542484905 , 351.928106131 , 422.313727357 , 492.699348583 , 563.084969809 , 633.470591035 , 703.856212261 , ],
8.25: [ 72.3938222149 , 144.787644430 , 217.181466645 , 289.575288859 , 361.969111074 , 434.362933289 , 506.756755504 , 579.150577719 , 651.544399934 , 723.938222149 , ],
8.45: [ 74.0003830214 , 148.000766043 , 222.001149064 , 296.001532085 , 370.001915107 , 444.002298128 , 518.002681149 , 592.003064171 , 666.003447192 , 740.003830214 , ],
8.65: [ 75.6069389626 , 151.213877925 , 226.820816888 , 302.427755850 , 378.034694813 , 453.641633776 , 529.248572738 , 604.855511701 , 680.462450664 , 756.069389626 , ],
8.85: [ 77.2135054563 , 154.427010913 , 231.640516369 , 308.854021825 , 386.067527281 , 463.281032738 , 540.494538194 , 617.708043650 , 694.921549106 , 772.135054563 , ],
9.1:  [ 79.2217587519 , 158.443517504 , 237.665276256 , 316.887035008 , 396.108793759 , 475.330552511 , 554.552311263 , 633.774070015 , 712.995828767 , 792.217587519 , ],
9.3:  [ 80.8283357781 , 161.656671556 , 242.485007334 , 323.313343112 , 404.141678890 , 484.970014668 , 565.798350446 , 646.626686224 , 727.455022003 , 808.283357781 , ],
9.5:  [ 82.4349342730 , 164.869868546 , 247.304802819 , 329.739737092 , 412.174671365 , 494.609605638 , 577.044539911 , 659.479474184 , 741.914408457 , 824.349342730 , ],
9.7:  [ 84.0415016767 , 168.083003353 , 252.124505030 , 336.166006707 , 420.207508384 , 504.249010060 , 588.290511737 , 672.332013414 , 756.373515090 , 840.415016767 , ],
9.9:  [ 85.6480709460 , 171.296141892 , 256.944212838 , 342.592283784 , 428.240354730 , 513.888425676 , 599.536496622 , 685.184567568 , 770.832638514 , 856.480709460 , ],
10.1: [ 87.2546355202 , 174.509271040 , 261.763906561 , 349.018542081 , 436.273177601 , 523.527813121 , 610.782448642 , 698.037084162 , 785.291719682 , 872.546355202 , ],
10.3: [ 88.8613216876 , 177.722643375 , 266.583965063 , 355.445286750 , 444.306608438 , 533.167930125 , 622.029251813 , 710.890573500 , 799.751895188 , 888.613216876 , ],
10.5: [ 90.4678425605 , 180.935685121 , 271.403527681 , 361.871370242 , 452.339212802 , 542.807055363 , 633.274897923 , 723.742740484 , 814.210583044 , 904.678425605 , ],
10.7: [ 92.0742566754 , 184.148513351 , 276.222770026 , 368.297026701 , 460.371283377 , 552.445540052 , 644.519796728 , 736.594053403 , 828.668310078 , 920.742566754 , ],
10.9: [ 93.6808166182 , 187.361633236 , 281.042449855 , 374.723266473 , 468.404083091 , 562.084899709 , 655.765716327 , 749.446532946 , 843.127349564 , 936.808166182 , ],
11.1: [ 95.2873877830 , 190.574775566 , 285.862163349 , 381.149551132 , 476.436938915 , 571.724326698 , 667.011714481 , 762.299102264 , 857.586490047 , 952.873877830 , ],
11.3: [ 96.8939509437 , 193.787901887 , 290.681852831 , 387.575803775 , 484.469754718 , 581.363705662 , 678.257656606 , 775.151607549 , 872.045558493 , 968.939509437 , ],
}

var COGSFunctions = {
    'sterling silver': (vol) => 0.038*vol + 29.5,
    'gold': (vol) => 0.793*vol + 35.8,
    'white gold': (vol) => 0.887*vol + 35.8,
    'red gold': (vol) => 0.822*vol + 40.6,
    'brass': (vol) => 20.7, //ignores eventual hike to 23.56
    'gold plated brass': (vol) => 31.56, //ignores eventual hike to 37.89
    'red gold plated brass': (vol) => 33.99, //ignores hike to 38.95
    'rhodium plated brass': (vol) => 33.99, //ignores hike to 40.98
    'bronze': (vol) => 36.18,
}

function modelParamsToVolume(radius, width) {
    return volLUT[radius][width-1]
}

function COGS(material, volume) {
    return COGSFunctions[material.toLowerCase()](volume)
}

function saleCost(material, volume) {
    material = material.toLowerCase();
    if (material === 'sterling silver') {
        return 169
    }
    var cogs = COGS(material, volume);
    var salePrice = cogs / (1 - grossMargin);
    var roundedSalePrice = Math.round(salePrice/10)*10 - 1;
    return roundedSalePrice
}